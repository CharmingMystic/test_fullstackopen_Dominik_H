{"ast":null,"code":"var _jsxFileName = \"/workspaces/test_fullstackopen_Dominik_H/part2/phb/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Persons from './components/Persons';\nimport PersonForm from './components/PersonForm';\nimport Filter from './components/Filter';\nimport phonebookService from './services/phonebook';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Notification = ({\n  message,\n  style\n}) => {\n  if (message === null) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style,\n    children: message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this);\n};\n_c = Notification;\nconst App = () => {\n  _s();\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchFilter, setSearchFilter] = useState('');\n  const [message, setMessage] = useState(null);\n  const [style, setStyle] = useState(\"\");\n  useEffect(() => {\n    phonebookService.getAll().then(names => {\n      setPersons(names);\n    }).catch(err => {\n      setStyle('error');\n      setMessage(\"error fetching data from backend api\");\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    });\n  }, []);\n  const addPerson = event => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    };\n    if (persons.some(e => e.name === newName)) {\n      const replaceId = persons.filter(person => person.name === newName)[0].id;\n      const replace = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`);\n      if (replace) {\n        phonebookService.update(replaceId, nameObject).then(returnedPerson => {\n          setMessage(`Updated ${returnedPerson.name}`);\n          setStyle('success');\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n          setPersons(persons.map(person => person.id !== replaceId ? person : returnedPerson));\n        }).catch(err => {\n          setMessage(`Information of ${newName} has already been removed from server`);\n          setStyle('error');\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n          setPersons(persons.filter(p => p.name !== newName));\n        });\n      }\n      setNewName('');\n      setNewNumber('');\n      return;\n    }\n    phonebookService.create(nameObject).then(newPerson => {\n      setMessage(`Added ${newPerson.name}`);\n      setStyle('success');\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n      setPersons(persons.concat(newPerson));\n      setNewName('');\n      setNewNumber('');\n    }).catch(err => {\n      setStyle('error');\n      setMessage(err.response.data.error);\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    });\n  };\n  const deletePerson = id => {\n    const personToDelete = persons.filter(person => person.id === id)[0];\n    if (window.confirm(`Delete ${personToDelete.name} ?`)) {\n      phonebookService.deletePerson(id).then(res => {\n        setPersons(persons.filter(person => person.id !== id));\n        setMessage(`Information of ${personToDelete.name} removed from server successfully`);\n        setStyle('success');\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      }).catch(err => {\n        setMessage(`Information of ${personToDelete.name} has already been removed from server`);\n        setStyle('error');\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n        setPersons(persons.filter(p => p.name !== personToDelete.name));\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onSubmit: addPerson,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: message,\n      style: style\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      searchFilter: searchFilter,\n      setSearchFilter: setSearchFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      newName: newName,\n      setNewName: setNewName,\n      newNumber: newNumber,\n      setNewNumber: setNewNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      persons: persons,\n      searchFilter: searchFilter,\n      deletePerson: deletePerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"8m8ww0+EIpCvdT1nAP4eeQ2Stm0=\");\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"Notification\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Persons","PersonForm","Filter","phonebookService","jsxDEV","_jsxDEV","Notification","message","style","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","App","_s","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchFilter","setSearchFilter","setMessage","setStyle","getAll","then","names","catch","err","setTimeout","addPerson","event","preventDefault","nameObject","name","number","some","e","replaceId","filter","person","id","replace","window","confirm","update","returnedPerson","map","p","create","newPerson","concat","response","data","error","deletePerson","personToDelete","res","onSubmit","_c2","$RefreshReg$"],"sources":["/workspaces/test_fullstackopen_Dominik_H/part2/phb/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport phonebookService from './services/phonebook'\n\nconst Notification = ({ message, style }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={style}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchFilter, setSearchFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ style, setStyle ] = useState(\"\")\n\n  useEffect(() => {\n    phonebookService\n      .getAll()\n      .then(names => {\n        setPersons(names)\n      })\n      .catch(err => {\n        setStyle('error')\n        setMessage(\"error fetching data from backend api\")\n        setTimeout(() => {setMessage(null)}, 5000)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n    if (persons.some(e => e.name === newName)) {\n      const replaceId = persons.filter(person => person.name === newName)[0].id\n      const replace = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (replace) {\n        phonebookService\n          .update(replaceId, nameObject)\n          .then(returnedPerson => {\n            setMessage(`Updated ${returnedPerson.name}`)\n            setStyle('success')\n            setTimeout(() => {setMessage(null)}, 5000)\n            setPersons(persons.map(person => person.id !== replaceId ? person : returnedPerson))\n          })\n          .catch(err => {\n            setMessage(`Information of ${newName} has already been removed from server`)\n            setStyle('error')\n            setTimeout(() => {setMessage(null)}, 5000)\n            setPersons(persons.filter(p => p.name !== newName))\n          })\n      }\n      setNewName('')\n      setNewNumber('')\n      return\n    }\n    phonebookService\n      .create(nameObject)\n      .then(newPerson => {\n        setMessage(`Added ${newPerson.name}`)\n        setStyle('success')\n        setTimeout(() => {setMessage(null)}, 5000)\n        setPersons(persons.concat(newPerson))\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch(err => {\n        setStyle('error')\n        setMessage(err.response.data.error)\n        setTimeout(() => {setMessage(null)}, 5000)\n      })\n  }\n\n  const deletePerson = id => {\n    const personToDelete = persons.filter(person => person.id === id)[0]\n    if (window.confirm(`Delete ${personToDelete.name} ?`)) {\n      phonebookService\n        .deletePerson(id)\n        .then(res => {\n          setPersons(persons.filter(person => person.id !== id))\n          setMessage(`Information of ${personToDelete.name} removed from server successfully`)\n          setStyle('success')\n          setTimeout(() => {setMessage(null)}, 5000)\n        })\n        .catch(err => {\n          setMessage(`Information of ${personToDelete.name} has already been removed from server`)\n          setStyle('error')\n          setTimeout(() => {setMessage(null)}, 5000)\n          setPersons(persons.filter(p => p.name !== personToDelete.name))\n        })\n    }\n  }\n\n  return (\n    <div onSubmit={addPerson}>\n      <h2>Phonebook</h2>\n      <Notification message={message} style={style} />\n      <Filter searchFilter={searchFilter} setSearchFilter={setSearchFilter} />\n      <h3>add a new</h3>\n      <PersonForm newName={newName} setNewName={setNewName} newNumber={newNumber} setNewNumber={setNewNumber} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} searchFilter={searchFilter} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}